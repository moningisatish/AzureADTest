<?xml version="1.0" encoding="UTF-8"?>
<configuration debug="true">

	<variable name="LOG_DIR" value="D:/EDT_LOGS" />

	<appender name="SIFT" class="ch.qos.logback.classic.sift.SiftingAppender">
		<discriminator>
			<key>loggerName</key>
			<defaultValue>common</defaultValue>
		</discriminator>

		<sift>
			<appender name="COMPANY_LOG_${loggerName}" class="ch.qos.logback.core.rolling.RollingFileAppender">
				<file>${LOG_DIR}/${loggerName}/EDT-${loggerName}.log</file>
				<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
					<fileNamePattern>${LOG_DIR}/${loggerName}/EDT-${loggerName}.%d{yyyy-MM-dd}.%i.log</fileNamePattern>
					<maxFileSize>10MB</maxFileSize>
					<maxHistory>30</maxHistory>
					<totalSizeCap>10GB</totalSizeCap>
				</rollingPolicy>
				<encoder>
					<pattern>%d{yyyy-MM-dd HH:mm:ss:sss} [%level] [%thread] [%logger:%line] %msg%n</pattern>
				</encoder>
			</appender>
		</sift>
	</appender>



	<appender name="CONSOLE"  class="ch.qos.logback.core.ConsoleAppender">
		<encoder>
			<pattern>%-5p %d{yyyy-MM-dd HH:mm:ss,SSS} [%t] %c - %m%n</pattern>
		</encoder>
	</appender>

	<!-- <appender name="FILE" class="ch.qos.logback.core.FileAppender">
		<file>C:\EDT_LOGS\edt_quick_wins.log</file>
		<encoder>
			<pattern>%-5p %d{yyyy-MM-dd HH:mm:ss,SSS} [%t] %c - %m%n</pattern>
		</encoder>
	</appender> -->

	<appender name="ROLLINGFILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
		<append>true</append>
		<file>${LOG_DIR}/edt_quick_wins.log</file>
		<encoder>
			<pattern>%-5p %d{yyyy-MM-dd HH:mm:ss,SSS} [%t] %c - %m%n</pattern>
		</encoder>
		<!--  <rollingPolicy	class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<fileNamePattern>${LOG_DIR}/edt_quick_wins.%d.log</fileNamePattern>
		</rollingPolicy>-->

		<rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
			<fileNamePattern>${LOG_DIR}/edt_quick_wins-%d{yyyy-MM-dd}.%i.log</fileNamePattern>
			<maxFileSize>5MB</maxFileSize>
			<maxHistory>45</maxHistory>
			<totalSizeCap>10GB</totalSizeCap>
		</rollingPolicy>

	</appender>

	<logger name="com.hsb" level="DEBUG" additivity="true">
		<appender-ref ref="CONSOLE" />
		<appender-ref ref="SIFT" />
	</logger>

	<logger name="org.spring" level="INFO" additivity="false">
		<appender-ref ref="CONSOLE" />
		<appender-ref ref="ROLLINGFILE" />
	</logger>

	<root level="DEBUG">
		<appender-ref ref="CONSOLE" />
		<appender-ref ref="ROLLINGFILE" />
	</root>

</configuration>
